<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>슬라이드 이펙트</title>

    <link rel="stylesheet" href="../assets/css/slider.css" />
    <link rel="stylesheet" href="../assets/css/dracula.css" />
    <style>
      /* slider */
      .slider__wrap {
        width: 100%;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .slider__img {
        /* 이미지 보이는 영역 */
        position: relative;
        width: 800px;
        height: 520px;
        overflow: hidden;
      }
      .slider__inner {
        /* 이미지를 감싸고 있는 부모(움직이는 부분) */
        display: flex;
        flex-wrap: wrap;
        width: 10000px;
        height: 520px;
        position: relative;
        left: -800px;
        /* transition: all 0.3s; */
      }
      .slider__inner.transition {
        transition: all 0.3s;
      }
      .slider {
        /* 개별적인 이미지 */
        position: relative;
        width: 800px;
        height: 520px;
      }
      .slider span {
        position: absolute;
        left: 5px;
        top: 5px;
        background: rgba(0, 0, 0, 0.4);
        color: #fff;
        padding: 5px 10px;
      }
      /* .slider:nth-child(1)::before { content: "이미지1"; }
            .slider:nth-child(2)::before { content: "이미지2"; }
            .slider:nth-child(3)::before { content: "이미지3"; }
            .slider:nth-child(4)::before { content: "이미지4"; }
            .slider:nth-child(5)::before { content: "이미지5"; }
            .slider:nth-child(6)::before { content: "이미지1"; } */

      @media (max-width: 800px) {
        .slider__img {
          width: 400px;
          height: 260px;
        }
      }

      .slider__btn button {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 50px;
        height: 50px;
        background: rgba(0, 0, 0, 0.4);
        text-align: center;
        line-height: 50px;
        transition: all 0.2s;
        cursor: pointer;
        display: block;
        color: #fff;
        pointer-events: auto;
        border: 0;
      }
      .slider__btn.disable button {
        pointer-events: none;
      }
      .slider__btn button:hover {
        background: rgb(118, 153, 90);
      }
      .slider__btn button.prev {
        left: 0;
      }
      .slider__btn button.next {
        right: 0;
      }
      .slider__dot {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        bottom: 20px;
      }
      .slider__dot .dot {
        width: 20px;
        height: 20px;
        background: rgba(0, 0, 0, 0.4);
        display: inline-block;
        border-radius: 50%;
        /* text-indent: 들여쓰기 속성. 여기에선 blind 역할 */
        text-indent: -9999px;
        transition: all 0.3s;
        margin: 3px;
      }
      .slider__dot .dot.active {
        background: rgba(255, 255, 255, 0.9);
      }
    </style>
  </head>

  <body class="img06">
    <header id="header">
      <h1>Javascript Slider Effect06</h1>
      <p>슬라이드 이펙트 : 버튼, 닷메뉴, 무한</p>
      <ul>
        <li><a href="sliderEffect01.html">1</a></li>
        <li><a href="sliderEffect02.html">2</a></li>
        <li><a href="sliderEffect03.html">3</a></li>
        <li><a href="sliderEffect04.html">4</a></li>
        <li><a href="sliderEffect05.html">5</a></li>
        <li class="active"><a href="sliderEffect06.html">6</a></li>
        <li><a href="sliderEffect07.html">7</a></li>
      </ul>
    </header>
    <!-- //header -->

    <main id="main">
      <section id="sliderType05">
        <div class="slider__wrap">
          <div class="slider__img">
            <div class="slider__inner">
              <div class="slider s1">
                <span>이미지1</span
                ><img src="../assets/img/effect_bg11-min.jpg" alt="이미지1" />
              </div>
              <div class="slider s2">
                <span>이미지2</span
                ><img src="../assets/img/effect_bg12-min.jpg" alt="이미지2" />
              </div>
              <div class="slider s3">
                <span>이미지3</span
                ><img src="../assets/img/effect_bg13-min.jpg" alt="이미지3" />
              </div>
              <div class="slider s4">
                <span>이미지4</span
                ><img src="../assets/img/effect_bg14-min.jpg" alt="이미지4" />
              </div>
              <div class="slider s5">
                <span>이미지5</span
                ><img src="../assets/img/effect_bg15-min.jpg" alt="이미지5" />
              </div>
            </div>
          </div>
          <div class="slider__btn">
            <button href="#" class="prev">prev</button>
            <button href="#" class="next">next</button>
          </div>
          <div class="slider__dot">
            <!-- <a href="#" class="dot active">이미지1</a>
                        <a href="#" class="dot">이미지2</a>
                        <a href="#" class="dot">이미지3</a>
                        <a href="#" class="dot">이미지4</a>
                        <a href="#" class="dot">이미지5</a> -->
          </div>
        </div>
      </section>
    </main>
    <!-- //main -->

    <footer id="footer">
      <div class="modal__wrap">
        <div class="modal__btn">소스 보기</div>
        <div class="modal__cont">
          <div class="modal__box">
            <div class="title">
              <span class="dot" aria-label="true"></span>
              <div class="tabs">
                <div class="active">
                  <span class="favicon" aria-label="true">
                    <svg
                      width="16"
                      height="16"
                      viewBox="0 0 18 18"
                      fill="none"
                      aria-hidden="true"
                      focusable="false"
                    >
                      <circle cx="9" cy="9" r="9" fill="#fff"></circle>
                      <path
                        d="M18 9C18 13.9706 15.4688 3.09375 9 10.125C2.53125 17.1562 0 13.9706 0 9C0 4.02944 4.02944 0 9 0C13.9706 0 18 4.02944 18 9Z"
                        fill="violet"
                      ></path>
                      <path
                        d="M18 9C18 13.9706 14.9062 0.84375 8.29688 6.1875C1.6875 11.5312 0 13.9706 0 9C0 4.02944 4.02944 0 9 0C13.9706 0 18 4.02944 18 9Z"
                        fill="pink"
                      ></path>
                    </svg>
                  </span>
                  <em>JAVASCRIPT</em>
                  <span class="close">
                    <svg
                      width="16"
                      height="16"
                      viewBox="0 0 16 16"
                      fill="none"
                      aria-hidden="true"
                      focusable="false"
                    >
                      <path
                        d="M12.5 3.5L3.5 12.5"
                        stroke="currentColor"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      ></path>
                      <path
                        d="M12.5 12.5L3.5 3.5"
                        stroke="currentColor"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      ></path>
                    </svg>
                  </span>
                </div>
                <div>
                  <span class="favicon" aria-label="true">
                    <svg
                      width="16"
                      height="16"
                      viewBox="0 0 18 18"
                      fill="none"
                      aria-hidden="true"
                      focusable="false"
                    >
                      <circle cx="9" cy="9" r="9" fill="#fff"></circle>
                      <path
                        d="M18 9C18 13.9706 15.4688 3.09375 9 10.125C2.53125 17.1562 0 13.9706 0 9C0 4.02944 4.02944 0 9 0C13.9706 0 18 4.02944 18 9Z"
                        fill="violet"
                      ></path>
                      <path
                        d="M18 9C18 13.9706 14.9062 0.84375 8.29688 6.1875C1.6875 11.5312 0 13.9706 0 9C0 4.02944 4.02944 0 9 0C13.9706 0 18 4.02944 18 9Z"
                        fill="pink"
                      ></path>
                    </svg>
                  </span>
                  <em>HTML</em>
                  <span class="close">
                    <svg
                      width="16"
                      height="16"
                      viewBox="0 0 16 16"
                      fill="none"
                      aria-hidden="true"
                      focusable="false"
                    >
                      <path
                        d="M12.5 3.5L3.5 12.5"
                        stroke="currentColor"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      ></path>
                      <path
                        d="M12.5 12.5L3.5 3.5"
                        stroke="currentColor"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      ></path>
                    </svg>
                  </span>
                </div>
                <div>
                  <span class="favicon" aria-label="true">
                    <svg
                      width="16"
                      height="16"
                      viewBox="0 0 18 18"
                      fill="none"
                      aria-hidden="true"
                      focusable="false"
                    >
                      <circle cx="9" cy="9" r="9" fill="#fff"></circle>
                      <path
                        d="M18 9C18 13.9706 15.4688 3.09375 9 10.125C2.53125 17.1562 0 13.9706 0 9C0 4.02944 4.02944 0 9 0C13.9706 0 18 4.02944 18 9Z"
                        fill="violet"
                      ></path>
                      <path
                        d="M18 9C18 13.9706 14.9062 0.84375 8.29688 6.1875C1.6875 11.5312 0 13.9706 0 9C0 4.02944 4.02944 0 9 0C13.9706 0 18 4.02944 18 9Z"
                        fill="pink"
                      ></path>
                    </svg>
                  </span>
                  <em>CSS</em>
                  <span class="close">
                    <svg
                      width="16"
                      height="16"
                      viewBox="0 0 16 16"
                      fill="none"
                      aria-hidden="true"
                      focusable="false"
                    >
                      <path
                        d="M12.5 3.5L3.5 12.5"
                        stroke="currentColor"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      ></path>
                      <path
                        d="M12.5 12.5L3.5 3.5"
                        stroke="currentColor"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      ></path>
                    </svg>
                  </span>
                </div>
              </div>
              <span class="plus" aria-label="true">
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 16 16"
                  fill="none"
                  aria-hidden="true"
                  focusable="false"
                >
                  <path
                    d="M2.5 8H13.5"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  ></path>
                  <path
                    d="M8 2.5V13.5"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  ></path>
                </svg>
              </span>
            </div>
            <div class="cont">
              <div class="active">
                <pre><code class="language-js">const sliderWrap = document.querySelector(".slider__wrap");
const sliderImg = document.querySelector(".slider__img"); // 보여지는 영역
const sliderInner = document.querySelector(".slider__inner"); // 움직이는 영역
const slider = document.querySelectorAll(".slider"); // 개별적 이미지
const sliderDot = document.querySelector(".slider__dot"); // dot
const sliderBtn = document.querySelector(".slider__btn"); // 버튼
const sliderBtnPrev = document.querySelector(".slider__btn .prev"); // 왼쪽 버튼
const sliderBtnNext = document.querySelector(".slider__btn .next"); // 오른쪽 버튼

let currentIndex = 0,
    sliderLength = slider.length,
    sliderWidth = slider[0].offsetWidth,
    sliderFirst = slider[0],    // 첫번째 이미지
    sliderLast = slider[sliderLength - 1],    // 마지막 이미지
    cloneFirst = sliderFirst.cloneNode(true),    // 첫번째 이미지 복사
    cloneLast = sliderLast.cloneNode(true),      // 마지막 이미지 복사
    dotIndex = "";

sliderInner.appendChild(cloneFirst);
sliderInner.insertBefore(cloneLast, sliderFirst);

function init(){
    // 이미지 개수만큼 dot 메뉴 만들기
    for(i=0; i&lt;sliderLength; i++){
        dotIndex += `&lt;a href="#" class="dot">&lt;/a>`;
    }
    sliderDot.innerHTML = dotIndex;
    sliderDot.firstElementChild.classList.add("active");
}
init();
const dotActive = document.querySelectorAll(".slider__dot .dot");

function gotoSlider(direction){
    sliderInner.classList.add("transition");
    sliderBtn.classList.add("disable");
    
    posInitial = sliderInner.offsetLeft;
    // offsetLeft : 부모 박스를 기준으로 상대적인 위치를 구함
    // -1이면 왼쪽으로, 1이면 오른쪽으로
    if(direction == -1){
        sliderInner.style.left = (posInitial + sliderWidth) + "px";
        currentIndex--;
    } else if (direction == 1){
        sliderInner.style.left = (posInitial - sliderWidth) + "px";
        currentIndex++;
    }
    // dotActive.forEach(el => el.classList.remove("active"));
    // dotActive[currentIndex].classList.add("active");
    // if(currentIndex == 0)
}

function checkIndex(){
    sliderInner.classList.remove("transition");

    // transition이 끝난 순간, transition을 제거하고 이미지 이동시키기
    // (순간이동 시켜주기)
    if(currentIndex == sliderLength){
        sliderInner.style.left = -(1 * sliderWidth) + "px";
        currentIndex = 0;
        dotActive.forEach(el => el.classList.remove("active"));
        dotActive[currentIndex].classList.add("active");
    }
    if(currentIndex == -1){
        sliderInner.style.left = -(sliderLength * sliderWidth) + "px";
        currentIndex = sliderLength - 1;
        dotActive.forEach(el => el.classList.remove("active"));
        dotActive[currentIndex].classList.add("active");
    }
}
dotActive.forEach((dot, index) => {
    dot.addEventListener("click", () => {
        gotoSlider(index);
        dotActive.forEach(el => el.classList.remove("active"));
        dotActive[index].classList.add("active");
        sliderInner.style.left = -(sliderWidth) * (index+1)+ "px";
        currentIndex == index;
        sliderBtn.classList.remove("disable");
    })
})

sliderBtnPrev.addEventListener("click", () => {
    gotoSlider(-1);
    setTimeout(() => {
        sliderBtn.classList.remove("disable")
    }, 300)
})
sliderBtnNext.addEventListener("click", () => {
    gotoSlider(1);
    setTimeout(() => {
        sliderBtn.classList.remove("disable")
    }, 300)
})
// transition이 끝났을 때를 감지하는 이벤트
sliderInner.addEventListener("transitionend", checkIndex);
// transition이 끝나기 전 버튼을 클릭하면 적용이 안 됨
// transition 중 버튼을 클릭할 수 없게 막거나, que를 건드려야 함</code></pre>
              </div>
              <div>
                <pre><code class="language-html">&lt;section id="sliderType05"&gt;
    &lt;div class="slider__wrap"&gt;
        &lt;div class="slider__img"&gt;
            &lt;div class="slider__inner"&gt;
                &lt;div class="slider"&gt;&lt;img src="../assets/img/effect_bg12-min.jpg" alt="이미지1" /&gt;&lt;/div&gt;
                &lt;div class="slider"&gt;&lt;img src="../assets/img/effect_bg13-min.jpg" alt="이미지2" /&gt;&lt;/div&gt;
                &lt;div class="slider"&gt;&lt;img src="../assets/img/effect_bg14-min.jpg" alt="이미지3" /&gt;&lt;/div&gt;
                &lt;div class="slider"&gt;&lt;img src="../assets/img/effect_bg15-min.jpg" alt="이미지4" /&gt;&lt;/div&gt;
                &lt;div class="slider"&gt;&lt;img src="../assets/img/effect_bg16-min.jpg" alt="이미지5" /&gt;&lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="slider__btn"&gt;
            &lt;a href="#" class="prev"&gt;prev&lt;/a&gt;
            &lt;a href="#" class="next"&gt;next&lt;/a&gt;
        &lt;/div&gt;
        &lt;div class="slider__dot"&gt;
            &lt;!-- &lt;a href="#" class="dot active"&gt;이미지1&lt;/a&gt;
            &lt;a href="#" class="dot"&gt;이미지2&lt;/a&gt;
            &lt;a href="#" class="dot"&gt;이미지3&lt;/a&gt;
            &lt;a href="#" class="dot"&gt;이미지4&lt;/a&gt;
            &lt;a href="#" class="dot"&gt;이미지5&lt;/a&gt; --&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/section&gt;
</code></pre>
              </div>
              <div>
                <pre><code class="language-css">/* slider */
.slider__wrap {
    width: 100%;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
}
.slider__img {
    /* 이미지 보이는 영역 */
    position: relative;
    width: 800px;
    height: 520px;
    overflow: hidden;
}
.slider__inner {
    /* 이미지를 감싸고 있는 부모(움직이는 부분) */
    display: flex;
    flex-wrap: wrap;
    width: 10000px;
    height: 520px;
    position: relative;
    left: -800px;
    /* transition: all 0.3s; */
}
.slider__inner.transition {
    transition: all 0.3s;
}
.slider {
    /* 개별적인 이미지 */
    position: relative;
    width: 800px;
    height: 520px;
}
.slider span {
    position: absolute;
    left: 5px;
    top: 5px;
    background: rgba(0, 0, 0, 0.4);
    color: #fff;
    padding: 5px 10px;
}
/* .slider:nth-child(1)::before { content: "이미지1"; }
.slider:nth-child(2)::before { content: "이미지2"; }
.slider:nth-child(3)::before { content: "이미지3"; }
.slider:nth-child(4)::before { content: "이미지4"; }
.slider:nth-child(5)::before { content: "이미지5"; }
.slider:nth-child(6)::before { content: "이미지1"; } */

@media (max-width: 800px) {
    .slider__img {
        width: 400px;
        height: 260px;
    }
}

.slider__btn button {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 50px;
    height: 50px;
    background: rgba(0, 0, 0, 0.4);
    text-align: center;
    line-height: 50px;
    transition: all 0.2s;
    cursor: pointer;
    display: block;
    color: #fff;
    pointer-events: auto;
    border: 0;
}
.slider__btn.disable button{
    pointer-events: none;
}
.slider__btn button:hover {
    background: rgb(118, 153, 90);
}
.slider__btn button.prev {
    left: 0;
}
.slider__btn button.next {
    right: 0;
}
.slider__dot {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    bottom: 20px;
}
.slider__dot .dot {
    width: 20px;
    height: 20px;
    background: rgba(0,0,0,0.4);
    display: inline-block;
    border-radius: 50%;
    /* text-indent: 들여쓰기 속성. 여기에선 blind 역할 */
    text-indent: -9999px;
    transition: all 0.3s;
    margin: 3px;
}
.slider__dot .dot.active {
    background: rgba(255,255,255,0.9);
}
</code></pre>
              </div>
            </div>
          </div>
          <div class="modal__close">
            <svg
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
              aria-hidden="true"
              focusable="false"
            >
              <path
                d="M12.5 3.5L3.5 12.5"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
              <path
                d="M12.5 12.5L3.5 3.5"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
            </svg>
          </div>
        </div>
      </div>
    </footer>
    <!-- //footer -->

    <script src="../assets/js/highlight.min.js"></script>
    <script src="../assets/js/common.js"></script>
    <script>
      const sliderWrap = document.querySelector(".slider__wrap");
      const sliderImg = document.querySelector(".slider__img"); // 보여지는 영역
      const sliderInner = document.querySelector(".slider__inner"); // 움직이는 영역
      const slider = document.querySelectorAll(".slider"); // 개별적 이미지
      const sliderDot = document.querySelector(".slider__dot"); // dot
      const sliderBtn = document.querySelector(".slider__btn"); // 버튼
      const sliderBtnPrev = document.querySelector(".slider__btn .prev"); // 왼쪽 버튼
      const sliderBtnNext = document.querySelector(".slider__btn .next"); // 오른쪽 버튼

      let currentIndex = 0,
        sliderLength = slider.length,
        sliderWidth = slider[0].offsetWidth,
        sliderFirst = slider[0], // 첫번째 이미지
        sliderLast = slider[sliderLength - 1], // 마지막 이미지
        cloneFirst = sliderFirst.cloneNode(true), // 첫번째 이미지 복사
        cloneLast = sliderLast.cloneNode(true), // 마지막 이미지 복사
        dotIndex = "";

      sliderInner.appendChild(cloneFirst);
      sliderInner.insertBefore(cloneLast, sliderFirst);

      function init() {
        // 이미지 개수만큼 dot 메뉴 만들기
        for (i = 0; i < sliderLength; i++) {
          dotIndex += `<a href="#" class="dot"></a>`;
        }
        sliderDot.innerHTML = dotIndex;
        sliderDot.firstElementChild.classList.add("active");
      }
      init();
      const dotActive = document.querySelectorAll(".slider__dot .dot");

      function gotoSlider(direction) {
        sliderInner.classList.add("transition");
        sliderBtn.classList.add("disable");

        posInitial = sliderInner.offsetLeft;
        // offsetLeft : 부모 박스를 기준으로 상대적인 위치를 구함
        // -1이면 왼쪽으로, 1이면 오른쪽으로
        if (direction == -1) {
          sliderInner.style.left = posInitial + sliderWidth + "px";
          currentIndex--;
        } else if (direction == 1) {
          sliderInner.style.left = posInitial - sliderWidth + "px";
          currentIndex++;
        }
        // dotActive.forEach(el => el.classList.remove("active"));
        // dotActive[currentIndex].classList.add("active");
        // if(currentIndex == 0)
      }

      function checkIndex() {
        sliderInner.classList.remove("transition");

        // transition이 끝난 순간, transition을 제거하고 이미지 이동시키기
        // (순간이동 시켜주기)
        if (currentIndex == sliderLength) {
          sliderInner.style.left = -(1 * sliderWidth) + "px";
          currentIndex = 0;
          dotActive.forEach((el) => el.classList.remove("active"));
          dotActive[currentIndex].classList.add("active");
        }
        if (currentIndex == -1) {
          sliderInner.style.left = -(sliderLength * sliderWidth) + "px";
          currentIndex = sliderLength - 1;
          dotActive.forEach((el) => el.classList.remove("active"));
          dotActive[currentIndex].classList.add("active");
        }
      }
      dotActive.forEach((dot, index) => {
        dot.addEventListener("click", () => {
          gotoSlider(index);
          dotActive.forEach((el) => el.classList.remove("active"));
          dotActive[index].classList.add("active");
          sliderInner.style.left = -sliderWidth * (index + 1) + "px";
          currentIndex == index;
          sliderBtn.classList.remove("disable");
        });
      });

      sliderBtnPrev.addEventListener("click", () => {
        gotoSlider(-1);
        setTimeout(() => {
          sliderBtn.classList.remove("disable");
        }, 300);
      });
      sliderBtnNext.addEventListener("click", () => {
        gotoSlider(1);
        setTimeout(() => {
          sliderBtn.classList.remove("disable");
        }, 300);
      });
      // transition이 끝났을 때를 감지하는 이벤트
      sliderInner.addEventListener("transitionend", checkIndex);
      // transition이 끝나기 전 버튼을 클릭하면 적용이 안 됨
      // transition 중 버튼을 클릭할 수 없게 막거나, que를 건드려야 함
    </script>
  </body>
</html>
